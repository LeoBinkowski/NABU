	.Z80

	.RADIX 10

	INCLUDE COMMON.MRO
	INCLUDE LINKTAB.EXA

	EXT LNKTB,CKCAT,CATFLG,INIT_SCR
	
;------------------ SPRITE FOR TEST ----------------------
	JIN::	DB	0
	SPX::	DB	0
	SPY::	DB	0
	TCB1::	DS	6
	SCOL::	DB	0
SPT::    DB 001H
 	DB 000H,0FFH,080H,0BFH,0A0H,0AFH,0A8H,0ABH,0AAH

TASK1::
	N.DEVRDY KEYBOARD,JSTCK1
	AND A
	JP NZ,CKJ
	LD A,(JIN)
	LD E,A
	JP LFT
CKJ::	N.DEVIO KEYBOARD,JSTCK1
	LD E,A
	LD (JIN),A
LFT::	SRA E
	JP NC,DWN
	LD A,(SPX)
	DEC A
	LD (SPX),A
DWN::	SRA E
	JP NC,RGHT
	LD A,(SPY)
	INC A
	LD (SPY),A
RGHT::	SRA E
	JP NC,UPP
	LD A,(SPX)
	INC A
	LD (SPX),A
UPP::	SRA E
	JP NC,FIR
	LD A,(SPY)
	DEC A
	LD (SPY),A
FIR::	SRA E
	JP NC,SPMV
	LD HL,INIT_SCR
	LD (HL),1

SPMV::	
	LD A,(SPY)
	ADD A,17
	LD E,A			;FAKE BOBY
	LD BC,(SPX)		;FAKE BOBX
	CALL CKCAT
	LD HL,CATFLG
	LD C,(HL)
	LD A,0CH
	ADD A,C
	LD (SCOL),A
	PCALL SPCOLR,0,(SCOL)
	PCALL SPMOVE,0,(SPY),(SPX)
	RET

	END

